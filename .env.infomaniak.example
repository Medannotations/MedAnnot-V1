# =====================================================
# CONFIGURATION MEDANNOT - INFOMANIAK (FULL AUTONOME)
# =====================================================
# ZÉRO SUPABASE - 100% hébergé en Suisse

# -----------------------------------------------------
# BASE DE DONNÉES POSTGRESQL (Infomaniak Cloud)
# -----------------------------------------------------
# Serveur Cloud PostgreSQL Infomaniak
DATABASE_URL=postgresql://username:password@xxxxx.postgresql.infomaniak.ch:5432/medannot

# Variables individuelles
PGHOST=xxxxx.postgresql.infomaniak.ch
PGPORT=5432
PGDATABASE=medannot
PGUSER=medannot_user
PGPASSWORD=votre_mot_de_passe_securise

# -----------------------------------------------------
# APPLICATION
# -----------------------------------------------------
NODE_ENV=production
PORT=3000

# URL publique de l'application
VITE_API_URL=https://medannot.ch/api
VITE_APP_URL=https://medannot.ch

# Clé secrète pour JWT (générez: openssl rand -base64 64)
JWT_SECRET=votre_jwt_secret_tres_long_et_aleatoire_min_64_caracteres

# Clé de chiffrement pour données sensibles (32 caractères)
ENCRYPTION_KEY=votre_cle_de_chiffrement_32_chars

# -----------------------------------------------------
# AUTHENTIFICATION (Maison - Sans Supabase)
# ----------------------------------------------------=
# Durée de validité des tokens
JWT_EXPIRES_IN=7d

# Configuration bcrypt (hash mots de passe)
BCRYPT_ROUNDS=12

# -----------------------------------------------------
# STRIPE (Paiement)
# ----------------------------------------------------=
# Clé publique (pk_live_...)
STRIPE_PUBLISHABLE_KEY=pk_live_YOUR_PUBLISHABLE_KEY_HERE

# Clé secrète (sk_live_...)
STRIPE_SECRET_KEY=sk_live_YOUR_SECRET_KEY_HERE

# Webhook secret (whsec_...)
# Endpoint: https://medannot.ch/api/webhooks/stripe
STRIPE_WEBHOOK_SECRET=whsec_YOUR_WEBHOOK_SECRET_HERE

# ----------------------------------------------------=
# EMAIL - Infomaniak Mail
# ----------------------------------------------------=
SMTP_HOST=mail.infomaniak.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=noreply@medannot.ch
SMTP_PASS=votre_mot_de_passe_email
SMTP_FROM=MedAnnot <noreply@medannot.ch>

# Email admin
ADMIN_EMAIL=admin@medannot.ch

# ----------------------------------------------------=
# FICHIERS & STOCKAGE
# ----------------------------------------------------=
UPLOAD_DIR=/var/www/medannot/uploads
MAX_FILE_SIZE=10485760

# ----------------------------------------------------=
# SÉCURITÉ
# ----------------------------------------------------=
# Rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# CORS
CORS_ORIGIN=https://medannot.ch,https://www.medannot.ch

# ----------------------------------------------------=
# LOGGING
# ----------------------------------------------------=
LOG_LEVEL=info
LOG_FILE=/var/log/medannot/app.log

# ----------------------------------------------------=
# FONCTIONNALITÉS
# ----------------------------------------------------=
ALLOW_REGISTRATION=true
TRIAL_DAYS=14
SUBSCRIPTION_PRICE_CENTS=14900
SUBSCRIPTION_CURRENCY=chf

# ----------------------------------------------------=
# GÉNÉRATION DES CLÉS (commandes)
# ----------------------------------------------------=
# JWT_SECRET:
#   openssl rand -base64 64
#
# ENCRYPTION_KEY:
#   openssl rand -hex 16
#
# Test connexion DB:
#   psql "$DATABASE_URL"
