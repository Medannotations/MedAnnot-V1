# =====================================================
# CONFIGURATION EXOSCALE - MedAnnot
# 1 Instance + 1 DBaaS PostgreSQL
# =====================================================

# -----------------------------------------------------
# BASE DE DONNÉES (Exoscale DBaaS)
# -----------------------------------------------------
# Remplace abc123-0 par ton vrai host (dans le portal Exoscale)
DATABASE_URL=postgresql://medannot_app:TON_MOT_DE_PASSE@abc123-0.db.exoscale.com:5432/medannot?sslmode=require

PGHOST=abc123-0.db.exoscale.com
PGPORT=5432
PGDATABASE=medannot
PGUSER=medannot_app
PGPASSWORD=TON_MOT_DE_PASSE_FORT

# -----------------------------------------------------
# APPLICATION
# -----------------------------------------------------
NODE_ENV=production
PORT=3000
VITE_APP_URL=https://medannot.ch

# -----------------------------------------------------
# AUTHENTIFICATION
# ----------------------------------------------------=
# Génère un secret JWT sur ton Mac/Linux:
# openssl rand -base64 64
JWT_SECRET=COLLE_ICI_LE_RESULTAT_DE_64_CARACTERES
JWT_EXPIRES_IN=7d
BCRYPT_ROUNDS=12

# -----------------------------------------------------
# STRIPE (OBLIGATOIRE)
# ----------------------------------------------------=
# Récupère tes clés sur https://dashboard.stripe.com/apikeys
STRIPE_PUBLISHABLE_KEY=pk_live_TA_CLE_PUBLIQUE
STRIPE_SECRET_KEY=sk_live_TA_CLE_SECRETE

# Webhook secret - À récupérer après création du webhook
# https://dashboard.stripe.com/webhooks
STRIPE_WEBHOOK_SECRET=whsec_TON_SECRET

# ----------------------------------------------------=
# EMAIL (Infomaniak - optionnel)
# ----------------------------------------------------=
# Si tu veux envoyer des emails (confirmations, etc.)
SMTP_HOST=mail.infomaniak.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=noreply@medannot.ch
SMTP_PASS=MOT_DE_PASSE_EMAIL
SMTP_FROM=MedAnnot <noreply@medannot.ch>

# ----------------------------------------------------=
# REDIS (Cache - optionnel)
# ----------------------------------------------------=
REDIS_URL=redis://redis:6379

# ----------------------------------------------------=
# SÉCURITÉ
# ----------------------------------------------------=
CORS_ORIGIN=https://medannot.ch,https://www.medannot.ch

# ----------------------------------------------------=
# INSTRUCTIONS
# ----------------------------------------------------=
#
# 1. Copie ce fichier: cp .env.exoscale.example .env
# 2. Remplace TOUTES les valeurs entre XXX par tes vraies infos
# 3. Ne commit JAMAIS le fichier .env (déjà dans .gitignore)
#
# Pour générer JWT_SECRET:
#   openssl rand -base64 64
#
# Pour tester la connexion DB:
#   psql "$DATABASE_URL"
#
# Après modification:
#   docker compose restart app
#
# =====================================================
