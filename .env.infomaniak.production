# =====================================================
# CONFIGURATION PRODUCTION - INFOMANIAK
# 1 VPS + 1 PostgreSQL Cloud
# =====================================================

# -----------------------------------------------------
# BASE DE DONNÉES POSTGRESQL (Infomaniak Cloud Server)
# -----------------------------------------------------
# Ces infos sont dans l'email de confirmation Infomaniak
DATABASE_URL=postgresql://medannot_user:TON_MOT_DE_PASSE@abc123.postgresql.infomaniak.ch:5432/medannot

PGHOST=abc123.postgresql.infomaniak.ch
PGPORT=5432
PGDATABASE=medannot
PGUSER=medannot_user
PGPASSWORD=TON_MOT_DE_PASSE_FORT

# -----------------------------------------------------
# APPLICATION
# -----------------------------------------------------
NODE_ENV=production
PORT=3000
VITE_APP_URL=https://medannot.ch

# -----------------------------------------------------
# AUTHENTIFICATION
# -----------------------------------------------------
# Génère un secret JWT : openssl rand -base64 64
JWT_SECRET=REMPLACE_PAR_UN_SECRET_DE_64_CARACTERES_GENERES_AVEC_OPENSSL
JWT_EXPIRES_IN=7d
BCRYPT_ROUNDS=12

# -----------------------------------------------------
# STRIPE (Configuration obligatoire)
# -----------------------------------------------------
# Clé publique (pk_live_...)
STRIPE_PUBLISHABLE_KEY=pk_live_TA_CLE_PUBLIQUE_STRIPE

# Clé secrète (sk_live_...)
STRIPE_SECRET_KEY=sk_live_TA_CLE_SECRETE_STRIPE

# Webhook secret (whsec_...) - À récupérer après création du webhook
STRIPE_WEBHOOK_SECRET=whsec_TON_SECRET_WEBHOOK

# -----------------------------------------------------
# EMAIL (Infomaniak Mail - optionnel)
# -----------------------------------------------------
# Si tu as un email chez Infomaniak : mail.infomaniak.com
# Configuration dans Manager Infomaniak
SMTP_HOST=mail.infomaniak.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=noreply@medannot.ch
SMTP_PASS=MOT_DE_PASSE_EMAIL
SMTP_FROM=MedAnnot <noreply@medannot.ch>

# Email admin (pour notifications)
ADMIN_EMAIL=admin@medannot.ch

# -----------------------------------------------------
# SÉCURITÉ
# ----------------------------------------------------=
# CORS - Origines autorisées
CORS_ORIGIN=https://medannot.ch,https://www.medannot.ch

# Rate limiting (en ms)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# -----------------------------------------------------
# LOGGING
# ----------------------------------------------------=
LOG_LEVEL=info

# =====================================================
# INSTRUCTIONS DE CONFIGURATION
# =====================================================
#
# 1. Générer le JWT_SECRET:
#    Sur ton Mac: openssl rand -base64 64
#    Copie le résultat ici
#
# 2. Configurer Stripe:
#    - Va sur https://dashboard.stripe.com
#    - Copie les clés LIVE (pk_live_ et sk_live_)
#    - Crée un webhook pointant vers https://medannot.ch/api/webhooks/stripe
#    - Copie le secret du webhook (whsec_...)
#
# 3. Configurer PostgreSQL:
#    - Récupère les infos dans l'email Infomaniak
#    - Remplace "abc123" par ton vrai host
#    - Remplace "TON_MOT_DE_PASSE" par ton vrai mot de passe
#
# 4. Configurer Email (optionnel):
#    - Crée un email noreply@medannot.ch chez Infomaniak
#    - Configure le mot de passe
#
# N'oublie pas de redémarrer l'application après modification:
# sudo systemctl restart medannot
#
# =====================================================
